<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=1024" />
        <meta name="apple-mobile-web-app-capable" content="yes" />

        <title>Editor</title>
        <link rel="stylesheet" type="text/css" href="css/layout.css" >
        <link rel="stylesheet" type="text/css" href="css/element.css" >

        <link rel="stylesheet" href="css/jquery-ui.css" />

        <script type='text/javascript' >
            //
            pressjson = {metadata: {}, slide: {}};
        </script>

        <script type="text/javascript" src="js/plugin/watch1.3.0.js"></script>
        <script type="text/javascript" src="js/plugin/simpleJsInheritance.js"></script>
        <script type="text/javascript" src="js/plugin/jquery.js"></script>
        <script type="text/javascript" src="js/plugin/jquery-ui.js"></script>        
        <script type="text/javascript" src="js/plugin/mustache.js"></script>
        <script type="text/javascript" src="js/plugin/mousewheel.js"></script>
        <script type="text/javascript" src="ckeditor/ckeditor.js"></script>

        <script type="text/javascript" src="js/plugin/jmpress.js"></script>


        <!--les modules-->
        <script type="text/javascript" src="js/testPresentation.js"></script>
        <script type="text/javascript" src="js/dynamicSlideshow.js"></script>
        <script type="text/javascript" src="js/time-line.js"></script>
        <script type="text/javascript" src="js/layout.js"></script>
        <script type="text/javascript" src="js/editorTools.js"></script>
        <script type="text/javascript" src="js/guiEditor.js"></script>
        <script type="text/javascript" src="js/model.js"></script> 
        <script type="text/javascript" src="js/slideshowEditor.js"></script>
        <script type="text/javascript" src="js/translator.js"></script>
        <script type="text/javascript" src="js/automaticEditor.js"></script>
        <script type="text/javascript" src="js/buildingTree.js"></script>


        <!--les boites a outils-->
        <script type="text/javascript" src="js/treeToPresentation.js"></script>
        <script type="text/javascript" src="js/3dTools.js"></script>
        <script type="text/javascript" src="js/3dToolsCam.js"></script>
        <script type="text/javascript" src="js/transformTools.js"></script>




    </head>

    <body>

        <!--<textarea id='debugCk'></textarea>-->
      



        <div  id="topbar">
            <ul class='noJoystick' >
                <li><a href="#" id="present" title="launch the presentation"><p>present</p></a></li>
                <li><a href="#" id="save" title="save your presentation"><p>save</p></a></li>
                <li><a href="#" id="parameters" title="parameters"><p>options</p></a>
                    <ul id="topbar-submenu">
                        <li><a href="#" id="clearAll" title="clear local storage and DOM"><p>clear all</p></a></li>
                        <li><a href="#" id="clearOne" title="clear one slideshow"><p>clear one</p></a></li>
                        <li><a href="#" id="clearDom" title="clear one slideshow"><p>clear all but local storage</p></a></li>
                        <!--<li><a href="#" id="info" title="more info on this editor"><p>info</p></a></li>-->
                        <!--<li><a href="" id="help" data-toggle="modal" data-target="#helpModal" title="how to use this editor"><p>help</p></a></li>-->
                        <li><a  id="loadSlide" title="load presentation"><p>load slide show</p></a></li>
                        <li><a  id="loadTree" title="load tree"><p>load tree</p></a></li>

                    </ul>
                </li>
            </ul>
        </div>
        <!--tag <nav> ?-->
        <div class='noJoystick sidebar' id="sidebar">

            <div class='arrow-nav' id="arrow-nav"></div>
            <ul>  
                <li id="tools">
                    <h1 id="header-drawing-tools">DRAWING TOOLS</h1>
                    <ul>
                        <li>
                            <a href="#" target='createSlide' class="slide-tool-button" id='slide-tool' title="create a slide"><p>slide</p></a>
                            <ul class="submenu">
                                <li>
                                    <a href="#" target='createSlideText' class="slide-tool-button" title="slide text"><p>With text</p></a>
                                </li>

                            </ul>
                        </li>
                        <li>
                            <a href="#" id="text-tool" target="createBodyText" class="text-tool-button" title="create text"><p>text</p></a>
                            <ul class="submenu">
                                <li>
                                    <a href="#" target="createH1Text" class="text-tool-button" id="text-tool-title" title="title type"><p>title 1</p></a>
                                </li>
                                <li>
                                    <a href="#" target="createH2Text" class="text-tool-button" id="text-tool-title" title="title type"><p>title 2</p></a>
                                </li>
                                <li>
                                    <a href="#" target="createH3Text" class="text-tool-button" id="text-tool-title" title="title type"><p>title 3</p></a>
                                </li>
                                <li>
                                    <a href="#" target="createBodyText" class="text-tool-button" id="text-tool-body" title="body type"><p>body</p></a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" id="geek-tool"  ><p>geek mode</p></a>
                        </li>

                    </ul>
                </li>
                <li id="time-line"style="overflow-y:scroll;">
                    <h1 id="header-time-line">TIME LINE</h1>
                    <ul id="sortable">
                    </ul>
                    <!--                    <ul class="nav-button">
                                            <li id="previous">
                                                <a href="#" id="previous-a" title="previous slide">
                                                    <img src="images/arrowsTLleftP.png" alt="previous slide">
                                                </a>
                                            </li>
                                            <li id="next">
                                                <a href="#" id="next-a" title="next slide">
                                                    <img src="images/arrowsTLrightP.png" alt="next slide">
                                                </a>
                                            </li>
                                        </ul>-->
                </li>
            </ul>

        </div>


        <div class='noJoystick sidebar' id="sidebarTree">

            <div class='arrow-nav' id="arrow-nav-tree"></div>

            <ul>  
                <li id="tools">
                    <h1 id="header-drawing-tools">PRESENTATION TOOLS</h1>
                    <ul>
                        <li>
                            <a href="#" target='goSlideShow' id='goSlideShow' title="goSlideShow"><p>goSlideShow</p></a>
                        </li>
                        <li>
                            <a href="#" target="gotTree" id='gotTree'  title="gotTree"><p>gotTree</p></a>
                        </li>
                    </ul>
                </li>
            </ul>

            <div id="treeMaker">
                <ol>
                    <li class='addSibling'> [+]  </li> 
                </ol>
            </div>

        </div>


        <div id='joystick'> 
            <div id="zone-tolerance-x" class ="zone-tolerance-joystick"></div>
            <div id="zone-tolerance-y" class ="zone-tolerance-joystick"></div>

        </div>

        

        <div id="helpModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h2 id="myModalLabel">How to use the editor</h2>
            </div>
            <div class="modal-body">
                <ul>
                    <li>
                        <h2> How to create things ? </h2>
                        <ul>
                            <li>
                                <h3>Create a slide</h3>
                                <ul>
                                    <li><p>click on one of the "slide" buttons </p></li>
                                    <li><p>click anywhere in the window</p></li>
                                </ul>
                            </li>
                            <li>
                                <h3>Create text</h3>
                                <ul>
                                    <li><p>click on one of the "text" buttons</p></li>
                                    <li><p>click on a slide</p></li>
                                    <li><p>caution : text can only be created on a slide</p></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <h2>How to manipulate a slide ?</h2>
                        <ul> 
                            <li>
                                <h3>Move a slide :</h3>
                                <ul>
                                    <li><p>short left click on a slide</p></li>
                                    <li><p>hold your click and move</p></li>
                                </ul>
                            </li>
                            <li>
                                <h3>Rotation of a slide (axis x and y) :</h3>
                                <ul>
                                    <li><p>short right click on a slide</p></li>
                                    <li><p>hold your click and move</p></li>
                                </ul>
                            </li>
                            <li>
                                <h3>Rotation of a slide (axis z) :</h3>
                                <ul>
                                    <li><p>long right click on a slide</p></li>
                                    <li><p>hold your click and move</p></li>
                                </ul>
                            </li>
                            <li>
                                <h3>Scale of a slide: </h3>
                                <ul> 
                                    <li><p>long left click on a slide</p></li>
                                    <li><p>hold your click and move up (extend) or down (shrink)</p></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <h2>How to edit things ?</h2>
                        <ul>
                            <li>
                                <h3>Edit text :</h3>
                                <ul>
                                    <li><p>double click on a text</p></li>
                                    <li><p>have fun with the text menu bar</p></li>
                                </ul>
                            </li>
                            <li>
                                <h3>Delete a slide :</h3>
                                <ul>
                                    <li><p>in the time line, hover on the slide you want to delete</p></li>
                                    <li><p>click on the red cross that has appeared</p></li>
                                </ul>
                            </li>
                        </ul>
                    <li>
                        <h2>How to navigate ?</h2>
                        <ul>
                            <li>
                                <h3>Move in the presentation</h3>
                                <ul>
                                    <li><p>short left click anywhere on the screen (but on slides)</p></li>
                                    <li><p>hold your click and move</p></li>
                                </ul>
                            </li>
                            <li>
                                <h3>Zoom</h3>
                                <ul>
                                    <li><p>use your mousewheel !</p></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <h2>How to edit a presentation ?</h2>
                        <ul>
                            <li>
                                <h3>Organise your slides</h3>
                                <ul>
                                    <li><p>reorganise timeline buttons with drag and drop</p></li>
                                </ul>
                            </li>
                            <li>
                                <h3>Save a presentation</h3>
                                <ul>
                                    <li><p>click on the save button</p></li>
                                    <li><p>one presentation at a time can be saved at a time, in your browser</p></li>
                                    <li><p>you can shut your browser or your computer down, and find your presentation in the state you left it</p></li>
                                </ul>
                            </li>
                            <li>
                                <h3>Launch a presentation</h3>
                                <ul>
                                    <li><p>click on the present button</p></li>
                                    <li><p>the presentation is launched in a new window</p></li>
                                </ul>
                            </li>
                            <li>
                                <h3>Delete a presentation</h3>
                                <ul>
                                    <li><p>click on the option button, then click on clear all</p></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            </div>
        </div>


        <div id="slideArea" >
            <div id="profondeur" class="step slide profondeur" data-scale ="1" data-z ="-3000" style="display:block"><p> en profondeur</p></div>

        </div>


  
        <div id='dialog-select-storage'>         
            
           
        </div>



        <!-- template Mustache -->

        <script id="templateContent" type="text/template">

            <span class='textarea' rows='1' cols='30' id={{matricule}} matricule={{matricule}} style='position: relative; left: {{pos.x}}px; top: {{pos.y}}px'>{{content}}</div>

        </script>

        <script id="templateTitle" type="text/template">

            <span class="li liTitle" contenteditable="true">{{content}}</span>

        </script>
        <script id="templateSibling" type="text/template">
            <li>
            {{#title}}
            <span class="li liTitle" contenteditable="true">{{content}}</span>
            {{/title}}


            {{#body}}
            <span class='textarea' rows='1' cols='30' id={{matricule}} matricule={{matricule}} style='position: relative; left: {{pos.x}}px; top: {{pos.y}}px'>{{content}}</span>
            {{/body}}  


            <span class='switchContent'> [switchBodyTitle] </span>
            <span class='removeSibling'> [-] </span>

            <ol> 

            <!--  -->

            <li class='addSibling'> [+]                
            </li>
            </ol>
            </li>


        </script>



        <div style='display:none;' id="tree2">
            <!--<div idà
            ="tree">--> 
            <ol>
                <li> Intro
                    <ol>
                        <li> Problématique
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> Objectif
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> Bagage initial
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li> La motivation
                    <ol>
                        <li> Contexte
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> Inconvénients 
                            <ol>
                                <li> Plateformes lourdes
                                    <ol>
                                        <li> Base de données
                                            <ol>
                                                <li> content </li>
                                            </ol>                                        
                                        </li>
                                        <li> Organisation des fichiers
                                            <ol>
                                                <li> content </li>
                                            </ol>                                        
                                        </li>
                                    </ol>
                                </li>
                                <li> Inmaintenabilité
                                    <ol>
                                        <li>content</li>
                                    </ol>
                                </li>
                                <li> Documentation inéxistante
                                    <ol>
                                        <li> content </li>
                                    </ol>                                        
                                </li>
                            </ol>
                        </li>

                    </ol>
                </li>
                <li> La solution
                    <ol>
                        <li> Modèle Vue Controler
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> Versionning
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> CodeIgniter
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> Documentation instantannée
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li> Code Igniter
                    <ol>
                        <li> Caractéristiques
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> Communauté et librairies
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> Moteur de template : Twig
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> Abstraction type objet
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li> Conclusion
                    <ol>
                        <li> Gain de temps
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> Maintenabilité
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> Standardisation
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                        <li> Clairté du code et efficacité de la BD
                            <ol>
                                <li>content</li>
                            </ol>
                        </li>
                    </ol>
                </li>
            </ol>
            <!--                <li>4
                                <ol>
                                    <li>content</li>
                                </ol>
                            </li>
                            <li>4
                                <ol>
                                    <li>content</li>
                                </ol>
                            </li>
                            <li>4
                                <ol>
                                    <li>content</li>
                                </ol>
                            </li>
                            <li>4
                                <ol>
                                    <li>content</li>
                                </ol>
                            </li>
                        </ol>-->


        </div>

        <script>
            function initJmpress() {
                $('#slideArea').children().remove();
                //il semblerait que Jmpress ait besoin d'au moins une slide dans slideArea pour pouvoir looper
                $('#slideArea').append('<div id="home" class="hidden step overview " data-scale ="5" data-x="1000" data-z ="1000" style="display:block"><p> </p></div>');
                $('#slideArea').removeClass();
                $('#slideArea').jmpress({
//                        keyboard: {
//                                keys: {
//                                        33:'',32:''
//                                }
//                        },
                    viewPort: {
                        height: 400,
                        width: 1800,
                        maxScale: 1
                    }
                });
//                $('#slideArea').jmpress({
//                    viewPort: {
//                        height: 400,
//                        width: 3000,
//                        maxScale: 1
//                    }
//                });
                $('#slideArea').jmpress('deinit', $('#home'));

                transform3D = new Transform3D();

            }

            $(document).ready(function() {
//                CKEDITOR.replace('debugCk');
                initContainer();



                initJmpress();








            });
        </script>



        <script id="templateSlide" type="text/template">

            <div id={{matricule}} matricule={{matricule}} class='step {{type}}' data-x = '{{pos.x}}' data-y = '{{pos.y}}' data-z = '{{pos.z}}' data-rotate-x='{{rotate.x}}' data-rotate-y='{{rotate.y}}' data-rotate-z='{{rotate.z}}' data-scale = '{{properties.scale}}' > 
            </div>

        </script>


        <!--ajouter position: relative; dans le style pour que les elements ne puissent pas se superposer (utile pour automatic editor)-->

        <script id="templateElement" type="text/template">

            <div id={{matricule}} matricule={{matricule}} class='element texte' style='position:absolute; left: {{pos.x}}px; top: {{pos.y}}px' > <span class='{{properties.hierarchy}}' >{{properties.content}}</span> </div>

        </script>

        <script id="templateElementCK" type="text/template">

            <div id={{matricule}} matricule={{matricule}} class='element texte' style='position:absolute; left: {{pos.x}}px; top: {{pos.y}}px' > <span class='{{properties.hierarchy}}' ></span> </div>

        </script>


        <script id="templateImage" type="text/template">

            <img id={{matricule}} matricule={{matricule}} src='{{source}}' style='position: relative; left: {{pos.x}}px; top: {{pos.y}}px' /> 

        </script>





    </body>
</html>
