<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=1024" />
        <meta name="apple-mobile-web-app-capable" content="yes" />

        <title>Editor</title>
        <link rel="stylesheet" type="text/css" href="css/soutenance.css" >

        <link rel="stylesheet" type="text/css" href="css/layout.css" >
        <link rel="stylesheet" type="text/css" href="css/element.css" >

        <link rel="stylesheet" type="text/css" href="highlight.js/styles/github.css" > 
        <!--<link type="text/css" rel="stylesheet" href="SyntaxHighlighter/css/SyntaxHighlighter.css"></link>-->

        <link rel="stylesheet" href="css/jquery-ui.css" />

        <script type='text/javascript' >
            //
            pressjson = {metadata: {}, slide: {}};
        </script>

        <script type="text/javascript" src="highlight.js/highlight.pack.js"></script> 
        <!--<script language="javascript" src="SyntaxHighlighter/js/shCore.js"></script>-->
        <!--<script language="javascript" src="SyntaxHighlighter/js/shBrushCSharp.js"></script>-->
        <!--<script language="javascript" src="SyntaxHighlighter/js/shBrushXml.js"></script>-->





        <script type="text/javascript" src="js/plugin/watch1.3.0.js"></script>
        <script type="text/javascript" src="js/plugin/simpleJsInheritance.js"></script>
        <script type="text/javascript" src="js/plugin/jquery.js"></script>
        <script type="text/javascript" src="js/plugin/jquery-ui.js"></script>        
        <script type="text/javascript" src="js/plugin/mustache.js"></script>
        <script type="text/javascript" src="js/plugin/mousewheel.js"></script>
        <script type="text/javascript" src="ckeditor/ckeditor.js"></script>
        <script type="text/javascript" src="ckeditor/image/plugin.js"></script>

        <script type="text/javascript" src="js/plugin/jmpress.js"></script>


        <!--les modules-->
        <script type="text/javascript" src="js/testPresentation.js"></script>
        <script type="text/javascript" src="js/dynamicSlideshow.js"></script>
        <script type="text/javascript" src="js/time-line.js"></script>
        <script type="text/javascript" src="js/layout.js"></script>
        <script type="text/javascript" src="js/editorTools.js"></script>
        <script type="text/javascript" src="js/guiEditor.js"></script>
        <script type="text/javascript" src="js/model.js"></script> 
        <script type="text/javascript" src="js/slideshowEditor.js"></script>
        <script type="text/javascript" src="js/translator.js"></script>
        <script type="text/javascript" src="js/automaticEditor.js"></script>
        <script type="text/javascript" src="js/buildingTree.js"></script>


        <!--les boites a outils-->
        <script type="text/javascript" src="js/treeToPresentation.js"></script>
        <script type="text/javascript" src="js/3dTools.js"></script>
        <script type="text/javascript" src="js/3dToolsCam.js"></script>
        <script type="text/javascript" src="js/transformTools.js"></script>




    </head>

    <body>

    <!--<td style="margin-left:50%" id='testHi' class="php">-->
<!--       <pre id='testHI' class='php'><code>
        $this->load->helper('url');

        /* S'il existe un formulaire pour l'étude, on récupère son ID pour mettre à jours son contenu, sinon on le crée et on récupère ayssu son ID */
        if ($this->formulaire->getFormulaireModelEtude($idEtude) == '') {
            $idForm = $this->formulaire->insertFormulaire($idEtude);
        } else {
            $idForm = $this->formulaire->getFormulaireModelEtude($idEtude)->id_model;
        }

        //quoi faire en fonction du bouton qui a envoyé ici
        if (isset($_POST['quit'])) {
            //on part sans rien faire, les autres cas sont traités une fois l'enregistrement effectué
            redirect('/etude/list');
        }

        </code></pre>-->




        <!--<textarea id='debugCk'></textarea>-->




        <div  id="topbar">
            <ul class='noJoystick' >
                <li><a><p>goSlideShow bf save</p></a></li>
                <li><a href="#" id="present" title="launch the presentation"><p>present</p></a></li>
                <li><a href="#" id="save" title="save your presentation"><p>save</p></a></li>
                <li><a href="#" id="quickSave" title="save your presentation"><p>quick save</p></a></li>
                <li><a href="#" id="extract" title="extract your presentation"><p>extract</p></a></li>
                <li><a href="#" id="parameters" title="parameters"><p>options</p></a>
                    <ul id="topbar-submenu">
                        <li><a href="#" id="clearAll" title="clear local storage and DOM"><p>clear all</p></a></li>
                        <li><a href="#" id="clearOne" title="clear one slideshow"><p>clear one</p></a></li>
                        <li><a href="#" id="clearDom" title="clear one slideshow"><p>clear all but local storage</p></a></li>
                        <!--<li><a href="#" id="info" title="more info on this editor"><p>info</p></a></li>-->
                        <!--<li><a href="" id="help" data-toggle="modal" data-target="#helpModal" title="how to use this editor"><p>help</p></a></li>-->
                        <li><a  id="loadSlide" title="load presentation"><p>load slide show</p></a></li>
                        <li><a  id="loadTree" title="load tree"><p>load tree</p></a></li>

                    </ul>
                </li>
            </ul>
        </div>
        <!--tag <nav> ?-->
        <div class='noJoystick sidebar' id="sidebar">

            <div class='arrow-nav' id="arrow-nav"></div>
            <ul>  
                <li id="tools">
                    <h1 id="header-drawing-tools">DRAWING TOOLS</h1>
                    <ul>
                        <li>
                            <a href="#" target='createSlide' class="slide-tool-button" id='slide-tool' title="create a slide"><p>slide</p></a>
                            <ul class="submenu">
                                <li>
                                    <a href="#" target='createSlideText' class="slide-tool-button" title="slide text"><p>With text</p></a>
                                </li>

                            </ul>
                        </li>
                        <li>
                            <a href="#" id="text-tool" target="createBodyText" class="text-tool-button" title="create text"><p>text</p></a>
                            <ul class="submenu">
                                <li>
                                    <a href="#" target="createH1Text" class="text-tool-button" id="text-tool-title" title="title type"><p>title 1</p></a>
                                </li>
                                <li>
                                    <a href="#" target="createH2Text" class="text-tool-button" id="text-tool-title" title="title type"><p>title 2</p></a>
                                </li>
                                <li>
                                    <a href="#" target="createH3Text" class="text-tool-button" id="text-tool-title" title="title type"><p>title 3</p></a>
                                </li>
                                <li>
                                    <a href="#" target="createBodyText" class="text-tool-button" id="text-tool-body" title="body type"><p>body</p></a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" id="geek-tool"  ><p>geek mode</p></a>
                        </li>

                    </ul>
                </li>
                <li id="time-line" >
                    <h1 id="header-time-line">TIME LINE</h1>                    
                    <ul class="nav-button">
                        <li id="previous">
                            <a href="#" id="previous-a" title="previous slide">
                                <img src="images/arrowsTLleftP.png" alt="previous slide">
                            </a>
                        </li>
                        <li id="next">
                            <a href="#" id="next-a" title="next slide">
                                <img src="images/arrowsTLrightP.png" alt="next slide">
                            </a>
                        </li>
                    </ul>
                    <ul id="sortable" style="overflow-y:scroll;">
                    </ul>
                </li>
            </ul>

        </div>


        <div class='noJoystick sidebar' id="sidebarTree">

            <div class='arrow-nav' id="arrow-nav-tree"></div>

            <ul>  
                <li id="toolsTree">
                    <h1 id="header-drawing-tools">AUTOMATIC SLIDESHOW TOOLS</h1>
                    <h3 id='slideshowName'> New slide show</h3>
                    <ul>
                        <li>
                            <a href="#" target='goSlideShow' id='goSlideShow' title="goSlideShow"><p>goSlideShow</p></a>
                        </li>
                        <li>
                            <a href="#" target="gotTree" id='gotTree'  title="gotTree"><p>gotTree</p></a>
                        </li>
                    </ul>
                </li>
            </ul>

            <div id="treeMaker" style="overflow-y:scroll; overflow-x:auto;">
                <ol>
                    <li class='addSibling'> [+]  </li> 
                </ol>
                <!--                <div id='espacePerduSousTimeLine'></div>-->
            </div>

        </div>


        <div id='joystick'> 
            <div id="zone-tolerance-x" class ="zone-tolerance-joystick"></div>
            <div id="zone-tolerance-y" class ="zone-tolerance-joystick"></div>

        </div>





        <div id="slideArea" >
            <div id="profondeur" class="step slide profondeur" data-scale ="1" data-z ="-3000" style="display:block">
                <!--                <iframe class='iframeInSlide' src='http://127.0.0.1:81/etude/formulaire/28'> 
                                
                                </iframe>-->
                <p> en profondeur</p> <img src=''/>
            </div>

        </div>



        <div id='dialog-select-storage'> </div>

        <div id='dialog-extract'>    </div>



        <!-- template Mustache -->

        <script id="templateContent" type="text/template">

            <span class='textarea' rows='1' cols='30' id={{matricule}} matricule={{matricule}} style='position: relative; left: {{pos.x}}px; top: {{pos.y}}px'>{{content}}</div>

        </script>

        <script id="templateTitle" type="text/template">

            <span class="li liTitle" contenteditable="true">{{content}}</span>

        </script>
        <script id="templateSibling" type="text/template">
            <li>
            {{#title}}
            <span class="li liTitle" contenteditable="true">{{content}}</span>
            {{/title}}


            {{#body}}
            <span class='textarea' rows='1' cols='30' id='{{matricule}}' matricule='{{matricule}}' style='position: relative; left: {{pos.x}}px; top: {{pos.y}}px'>{{content}}</span>
            {{/body}}  


            <span class='switchContent'> [switchBodyTitle] </span>
            <span class='removeSibling'> [-] </span>

            <ol> 

            <!--  -->

            <li class='addSibling'> [+]                
            </li>
            </ol>
            </li>


        </script>




        <script>
//            hljs.initHighlightingOnLoad();

            $(document).ready(function() {
//                CKEDITOR.replace('debugCk');
                initContainer();



                initJmpress();

            });
        </script>



        <script id="templateSlide" type="text/template">

            <div id={{matricule}} matricule={{matricule}} class='step {{type}}' data-x = '{{pos.x}}' data-y = '{{pos.y}}' data-z = '{{pos.z}}' data-rotate-x='{{rotate.x}}' data-rotate-y='{{rotate.y}}' data-rotate-z='{{rotate.z}}' data-scale = '{{properties.scale}}' > 
            </div>

        </script>


        <!--ajouter position: relative; dans le style pour que les elements ne puissent pas se superposer (utile pour automatic editor)-->

        <script id="templateElement" type="text/template">

            <div id={{matricule}} matricule={{matricule}} class='element texte' style='position:absolute; left: {{pos.x}}px; top: {{pos.y}}px' > <span class='{{properties.hierarchy}}' >{{properties.content}}</span> </div>

        </script>

        <script id="templateElementCK" type="text/template">

            <div id={{matricule}} matricule={{matricule}} class='element texte' style='position:absolute; left: {{pos.x}}px; top: {{pos.y}}px' > <span class='{{properties.hierarchy}}' ></span> </div>

        </script>


        <script id="templateImage" type="text/template">

            <img id={{matricule}} matricule={{matricule}} src='{{source}}' style='position: relative; left: {{pos.x}}px; top: {{pos.y}}px' /> 

        </script>





    </body>
</html>
